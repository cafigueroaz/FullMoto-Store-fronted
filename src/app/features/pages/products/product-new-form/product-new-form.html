<form class="form" [formGroup]="formData" (ngSubmit)="onSubmit()">
  <h1>Nuevo producto</h1>

  <div>
    <label for="name" class="label">Nombre</label>
    <input
      type="text"
      class="input input-name"
      id="product-name"
      formControlName="name"
      required
      placeholder="Ingrese el nombre del producto"
    />

    <div class="container-error">
      @if ((formDataName?.invalid && formDataName?.dirty) || formDataName?.touched) {
        @if (formDataName?.errors?.['required']) {
          <small>El nombre es requerido</small>
        }

        @if (formDataName?.errors?.['minlength']) {
          <small>El nombre debe ser mayor a 3 carácteres</small>
        }
      }
    </div>
  </div>

  <div>
    <label for="description" class="label">Descripción</label>
    <textarea
      class="input input-description"
      id="product-description"
      formControlName="description"
      required
      placeholder="Ingrese la descripción del producto"
    ></textarea>
    <div class="error">
      @if (
        (formDataDescription?.invalid && formDataDescription?.dirty) || formDataDescription?.touched
      ) {
        @if (formDataDescription?.errors?.['required']) {
          <small> La descripción es requerida</small>
        }
        @if (formDataDescription?.errors?.['minlength']) {
          <small> La descripción debe tener mínimo 15 caracteres</small>
        }
        @if (formDataDescription?.errors?.['maxlength']) {
          <small> La descripción debe tener máximo 140 caracteres</small>
        }
      }
    </div>
  </div>

  <div>
    <label for="price" class="label">Precio</label>
    <input
      type="number"
      class="input input-price"
      id="price"
      formControlName="price"
      min="0"
      step="0.01"
      required
      placeholder="0.00"
    />

    <div class="error">
      @if ((formDataPrice?.invalid && formDataPrice?.dirty) || formDataPrice?.touched) {
        @if (formDataPrice?.errors?.['required']) {
          <small> El precio es requerido</small>
        }
        @if (formDataPrice?.errors?.['min']) {
          <small> El precio debe ser igual o mayor a cero</small>
        }
      }
    </div>
  </div>

  <div>
    <label for="stock" class="label">Stock</label>
    <input
      type="number"
      class="input input-stock"
      id="stock"
      formControlName="stock"
      min="0"
      required
    />

    <div class="error">
      @if ((formDataStock?.invalid && formDataStock?.dirty) || formDataStock?.touched) {
        @if (formDataStock?.errors?.['required']) {
          <small> La cantidad es requerida</small>
        }
        @if (formDataStock?.errors?.['min']) {
          <small> La cantidad debe ser igual o mayor a cero</small>
        }
      }
    </div>
  </div>

  <div class="field">
    <label for="product-category" class="label">Categoria</label>
    <select
      ntype="text"
      class="input input-categoryId"
      id="product-category"
      formControlName="categoryId"
      required
    >
      <option value="">Seleccione...</option>
      @for (category of categories$ | async; track $index) {
        <option [value]="category.id">{{ category.name }}</option>
      }
    </select>
  </div>

  <div>
    <label for="brand" class="label">Marca</label>
    <input
      type="text"
      class="input input-brand"
      id="brand"
      formControlName="brand"
      placeholder="Ingrese la marca del producto"
    />
  </div>

  <div>
    <label for="compatibleWith" class="label">Compatible con</label>
    <input
      type="text"
      class="input input-compatibleWith"
      id="compatibleWith"
      formControlName="compatibleWith"
      placeholder="Ej: Honda CBR, Yamaha R1"
    />
  </div>

  <div>
    <label for="mainImage" class="label">Imagen principal</label>
    <input
      type="text"
      class="input input-mainImage"
      id="mainImage"
      formControlName="mainImage"
      required
      placeholder="URL de la imagen principal"
    />
  </div>

  <div>
    <label for="imageGallery" class="label">Galería de imágenes</label>
    <input
      type="text"
      class="input input-imageGallery"
      id="imageGallery"
      formControlName="imageGallery"
      placeholder="URLs separadas por comas"
    />
  </div>

  <div>
    <label for="status" class="label">Estado</label>
    <select class="input input-status" id="status" formControlName="status">
      <option value="active">Activo</option>
      <option value="inactive">Inactivo</option>
    </select>
  </div>

  <div class="field-buttoms">
    <button type="submit" class="button">Crear Producto</button>
    <button class="button">Reset</button>
  </div>
</form>
